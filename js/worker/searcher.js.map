{"version":3,"sources":["worker/searcher.js"],"names":[],"mappings":";;AAAA,MAAM,CAAC,CACL,YAAY,EACZ,YAAY,EACZ,cAAc,EACd,gBAAgB,CAChB,EACD,UAAU,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE;AACpC,KAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAU,CAAC,EAAE;AAC7C,MAAI,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;AAC7B,UAAO;GACP;;AAED,MAAI,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI;MACtB,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;MACvB,IAAI,GAAG,IAAI,CAAC,GAAG,EAAE;MACjB,OAAO,GAAG,EAAE,CAAC;;AAEd,MAAI,CAAC,KAAK,CAAC,MAAM,EAAE;AAClB,UAAO;GACP;;AAED,OAAK,CAAC,KAAK,CAAC,UAAU,IAAI,EAAE;AAC3B,OAAI,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;;AAEpC,UAAO,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CACzB,GAAG,CAAC,UAAC,IAAI;WAAK,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC;IAAA,CAAC,CAC7B,OAAO,EAAE,CACT,MAAM,EAAE,CACR,KAAK,EAAE,CACR,CAAC;;AAEF,UAAO,KAAK,CAAC,MAAM,CAAC;GACpB,CAAC,CAAC;;AAEH,MAAI,CAAC,WAAW,CAAC;AAChB,OAAI,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK;AAClB,UAAO,EAAE,CAAC,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,EAAE,OAAO,CAAC;AACzC,QAAK,EAAE,KAAK;AACZ,QAAK,EAAE,KAAK;AACZ,OAAI,EAAE,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI;GACvB,CAAC,CAAC;EACH,CAAC,CAAC;CAEH,CAAC,CAAC","file":"worker/searcher.js","sourcesContent":["define([\n\t\t'underscore',\n\t\t'utils/hash',\n\t\t'utils/binary',\n\t\t'utils/tokenize'\n\t],\n\tfunction (_, hash, binary, tokenize) {\n\t\tself.addEventListener('message', function (e) {\n\t\t\tif (e.data.type !== 'search') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar query = e.data.text,\n\t\t\t\twords = tokenize(query),\n\t\t\t\ttime = Date.now(),\n\t\t\t\tresults = [];\n\n\t\t\tif (!words.length) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twords.every(function (word) {\n\t\t\t\tvar items = binary(hash.keys, word);\n\n\t\t\t\tresults.push(_.chain(items)\n\t\t\t\t\t.map((item) => hash.map[item])\n\t\t\t\t\t.flatten()\n\t\t\t\t\t.unique()\n\t\t\t\t\t.value()\n\t\t\t\t);\n\n\t\t\t\treturn items.length;\n\t\t\t});\n\n\t\t\tself.postMessage({\n\t\t\t\ttype: e.data.event,\n\t\t\t\tresults: _.intersection.apply(_, results),\n\t\t\t\twords: words,\n\t\t\t\tquery: query,\n\t\t\t\ttime: Date.now() - time\n\t\t\t});\n\t\t});\n\n\t});"],"sourceRoot":"/source/"}