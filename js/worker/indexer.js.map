{"version":3,"sources":["worker/indexer.js"],"names":[],"mappings":";;AAAA,MAAM,CAAC,CACL,YAAY,EACZ,gBAAgB,CAChB,EACD,UAAU,IAAI,EAAE,QAAQ,EAAE;AACzB,UAAS,IAAI,CAAC,IAAI,EAAE,EAAE,EAAE;AACvB,MAAI,IAAI,IAAI,IAAI,CAAC,GAAG,EAAE;AACrB,OAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;GACxB,MAAM;AACN,OAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACrB,OAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;GACtB;EACD;;AAED,UAAS,OAAO,CAAC,KAAK,EAAE;AACvB,MAAI,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;;AAEjC,OAAK,CAAC,OAAO,CAAC,UAAU,IAAI,EAAE;AAC7B,OAAI,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE,CAAC,CAAC;GACrB,CAAC,CAAC;EACH;;AAED,KAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAU,CAAC,EAAE;AAC7C,MAAI,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;AAC5B,UAAO;GACP;;AAED,GAAC,CAAC,IAAI,CAAC,KAAK,CACV,OAAO,CAAC,UAAU,KAAK,EAAE;AACzB,UAAO,CAAC,KAAK,CAAC,CAAC;;AAEf,QAAK,CAAC,CAAC,CAAC,OAAO,CAAC,UAAC,KAAK;WAAK,OAAO,CAAC,KAAK,CAAC;IAAA,CAAC,CAAC;GAC3C,CAAC,CAAC;;AAEJ,MAAI,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE;AAC9B,UAAO,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;GACtB,CAAC,CAAC;;AAEH,MAAI,CAAC,WAAW,CAAC;AAChB,OAAI,EAAE,SAAS;GACf,CAAC,CAAC;EACH,CAAC,CAAC;CACH,CAAC,CAAC","file":"worker/indexer.js","sourcesContent":["define([\n\t\t'utils/hash',\n\t\t'utils/tokenize'\n\t],\n\tfunction (hash, tokenize) {\n\t\tfunction save(word, id) {\n\t\t\tif (word in hash.map) {\n\t\t\t\thash.map[word].push(id);\n\t\t\t} else {\n\t\t\t\thash.keys.push(word);\n\t\t\t\thash.map[word] = [id];\n\t\t\t}\n\t\t}\n\n\t\tfunction process(entry) {\n\t\t\tvar words = tokenize(entry.text);\n\n\t\t\twords.forEach(function (word) {\n\t\t\t\tsave(word, entry.id);\n\t\t\t});\n\t\t}\n\n\t\tself.addEventListener('message', function (e) {\n\t\t\tif (e.data.type !== 'index') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.data.array\n\t\t\t\t.forEach(function (entry) {\n\t\t\t\t\tprocess(entry);\n\n\t\t\t\t\tentry.p.forEach((entry) => process(entry));\n\t\t\t\t});\n\n\t\t\thash.keys.sort(function (a, b) {\n\t\t\t\treturn a > b ? 1 : -1;\n\t\t\t});\n\n\t\t\tself.postMessage({\n\t\t\t\ttype: 'indexed'\n\t\t\t});\n\t\t});\n\t});"],"sourceRoot":"/source/"}